## 押しボタンスイッチを追加する

ボタンを押すと、虹が点滅し、ユニコーンがそれに合わせて踊るようにしましょう！

### 押しボタンスイッチを接続する

--- task --- 押しボタンスイッチをブレッドボードとGPIOピンに接続します。

押しボタンスイッチをRaspberry Piに接続する方法については、以下をクリックしてください。 説明では**GPIO 17**を使っていますが 、**GPIO 17**はすでにLED用に使っていますので、ボタン用には**GPIO 5**を使うことに注意してください。

[[[rpi-gpio-wiring-a-button]]]

虹は次のようになります。

![押しボタンスイッチと虹](images/rainbowbutton.png) --- /task ---

### 押しボタンスイッチをコーディングする

--- task --- 以下のブロックを使用して、押しボタンスイッチでユニコーンを踊らせるようにします。

```blocks3
when button (5 v) is [pressed v] :: hat extension
```

--- /task ---

### ユニコーンのダンスを操作する

現時点で、3つのスクラッチのコードがあります。

1. ユニコーンを踊らせるコード
2. 虹を点滅させるコード
3. 押しボタンスイッチのコード

次に、これらのコードを連結して、ユニコーンが虹に合わせて踊るようにし、追加した押しボタンスイッチを押して虹とユニコーンを制御できるようにします。

--- task --- 押しボタンスイッチのコードから`と言う`{:class="block3looks"}ブロックをすべて削除してからコードを複製します。 --- /task ---

--- task --- ユニコーンのコードで、`フラグをクリックしたとき`{:class="block3events"}ブロックを削除します。 ユニコーンのコードの残りの部分を、押しボタンスイッチのコードの`でなければ`{:class="block3control"}ブロックに挿入します。 押しボタンスイッチのコードの**1つのコピーのみ**に挿入します。 --- /task ---

--- task --- 虹のコードで、`フラグをクリックしたとき`{:class="block3events"}ブロックを削除して、コードの残りを押しボタンスイッチのコードの**他のコピー**の`でなければ`{:class="block3control"}ブロックに挿入します。 --- /task ---

--- task --- 押しボタンスイッチのコードの両方のコピーの`もし・・・なら`{:class="block3control"}スロットに、アクションを追加します。 `コスチュームを最初のものに切り替える`{:class="block3looks"}を使えば、ユニコーンはダンスの動きが混じりあうことはありません。 --- /task ---

--- hints ---
--- hint ---
ボタンを押しても虹が点灯せず、ユニコーンも合わせて踊らない場合は、次の点を確認してください。

1. すべての部品が適切なGPIOピンに接続されている
2. 入力と出力がコードで適切に使われている
3. 2つのコードのタイミングが一致している
4. 適切なコードブロックをすべて使用している
--- /hint ---
--- /hints ---